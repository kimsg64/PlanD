{"ast":null,"code":"var _jsxFileName = \"D:\\\\__Bitcamp\\\\__crafts\\\\02_final\\\\project\\\\1022 ~\\\\PlanD\\\\front-end\\\\src\\\\pages\\\\MemberHome.jsx\",\n    _s = $RefreshSig$();\n\n// 달력 스타일링 마무리\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Header from \"../components/header/Header\";\nimport Footer from \"../components/footer/Footer\";\nimport ImageSlider from \"../components/body/imageSlider/ImageSlider\";\nimport Dots from \"../components/body/imageSlider/Dots\";\nimport { PointLetter, BodyLayout, StyledButton, MenuBox, SubMenuTitle, MyMenuItemBox } from \"../components/body/mixin/Mixin\";\nimport CustomCalerdar from \"../components/body/calendar/CustomCalerdar\";\nimport { Link } from \"react-router-dom\";\nimport { read_cookie } from \"sfcookies\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MenuSection = styled.section`\n  width: 60vw;\n  height: 72vh;\n  margin: var(--margin-default);\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n`;\n_c = MenuSection;\nconst Container = styled.div`\n  width: 40%;\n  height: 40%;\n  min-width: 360px;\n  min-height: 520px;\n  margin: var(--margin-default);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: var(--color-bg);\n  border-radius: 8px;\n`;\n_c2 = Container;\nconst HomeMenuBox = styled(MenuBox)`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n_c3 = HomeMenuBox;\nconst HomeSubMenuTitle = styled(SubMenuTitle)`\n  width: 100%;\n  background-color: var(--color-light-green);\n  text-align: center;\n`; // const SubHeading = styled.div`\n//   margin-top: calc(var(--margin-default)) 0;\n//   font-size: var(--font-size-title-normal);\n// `;\n// const Article = styled.article`\n//   width: 100%;\n//   height: calc(100% - var(--margin-default) - var(--font-size-title-normal));\n//   padding: var(--padding-default);\n//   font-size: var(--font-size-title-small);\n//   display: flex;\n//   flex-direction: column;\n//   align-items: flex-start;\n// `;\n// const ArticleItem = styled.div`\n//   margin: calc(var(--margin-default) / 2) calc(var(--margin-default) / 4);\n// `;\n\n_c4 = HomeSubMenuTitle;\nconst StyledButtonWidthMargin = styled(StyledButton)`\n  margin-top: ${props => props.fromTop};\n  margin-bottom: 20px;\n`;\n_c5 = StyledButtonWidthMargin;\n\nconst MemberHome = () => {\n  _s();\n\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [userData, setUserData] = useState(null);\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [idx, setIdx] = useState(\"first\");\n  const [Anniversary, setAnniversary] = useState([]); // console.log(\"idx in member home\", idx);\n  // 날짜 선택하고 course로 넘어가게 하기\n  // console.log(\"멤버홈\", selectedDate);\n\n  useEffect(() => {\n    // 마이페이지에서 수정하러 왔을 때만 axios에서 유저 정보 받아오기\n    if (read_cookie(\"userId\").length > 0) {\n      // 쿠키 읽어서 유저 아이디가 있다면 서버에서 정보 받아오기\n      const userId = read_cookie(\"userId\");\n      const body = {\n        userId: userId\n      };\n      axios.post(\"/wherewego/getUserData\", body).then(response => {\n        // console.log(response.data);\n        setUserData(response.data);\n        setIsLoaded(true);\n      }).catch(error => console.log(error));\n    }\n  }, []); // console.log(userData);\n\n  useEffect(() => {\n    calculateDDays(100);\n  }, [isLoaded]); // 날짜 객체를 넣으면 년, 월, 일만 반환\n\n  const getYMD = dateString => {\n    const year = parseInt(dateString.substring(0, 4));\n    const month = parseInt(dateString.substring(5, 7));\n    const date = parseInt(dateString.substring(8, 10));\n    return [year, month, date];\n  }; // 두 날짜 간의 차이를 구함 => 오늘 날짜 - 특정 날짜\n\n\n  const betweenDays = (firstDate, secondDate) => {\n    const betweenTime = Math.abs(secondDate.getTime() - firstDate.getTime());\n    return Math.floor(betweenTime / (1000 * 60 * 60 * 24));\n  };\n\n  const dDays = [];\n  const today = new Date();\n\n  const calculateDDays = anniversary => {\n    if (isLoaded) {\n      if (userData.startdate !== null) {\n        console.log(\"기념일 raw-data:\", userData.startdate); // 기념일의 연월일\n\n        const dYMD = getYMD(userData.startdate);\n        const dDay = new Date(dYMD[0], dYMD[1] - 1, dYMD[2]);\n        console.log(\"기념일 YMD: \", dYMD); // console.log(\"기념일 date객체: \", dDay);\n        // 오늘의 연월일\n        // 오늘이 며칠째인지 계산(anniversary x)\n\n        if (anniversary === undefined) {\n          return betweenDays(dDay, today); // 입력한 수가 며칠 뒤인지 계산\n        } else if (!isNaN(anniversary)) {\n          //   // + 100일을 반복해서 구함\n          const targetDay = new Date(dYMD[0], dYMD[1] - 1, dYMD[2] + anniversary); // console.log(dDays);\n          // if (betweenDays(targetDay, today) < 0) {\n          //   dDays.push(targetDay);\n          // } else {\n          //   return dDays.length <= 7\n          //     ? calculateDDays(anniversary + 100)\n          //     : dDays.map((day) => betweenDays(day, today));\n          // }\n        }\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BodyLayout, {\n      padding: \"0\",\n      children: [/*#__PURE__*/_jsxDEV(ImageSlider, {\n        idx: idx,\n        setIdx: setIdx\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dots, {\n        idx: idx,\n        setIdx: setIdx\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MenuSection, {\n        children: [/*#__PURE__*/_jsxDEV(Container, {\n          children: /*#__PURE__*/_jsxDEV(HomeMenuBox, {\n            children: isLoaded && (userData === null || userData === void 0 ? void 0 : userData.startdate) === null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(HomeSubMenuTitle, {\n                children: \"\\uAE30\\uB150\\uC77C\\uC744 \\uC124\\uC815\\uD574 \\uC8FC\\uC138\\uC694!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: `/individualform`,\n                children: /*#__PURE__*/_jsxDEV(StyledButtonWidthMargin, {\n                  fromTop: \"400px\",\n                  children: \"\\uAE30\\uB150\\uC77C \\uC124\\uC815\\uD558\\uB7EC \\uAC00\\uAE30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(HomeSubMenuTitle, {\n                children: [userData === null || userData === void 0 ? void 0 : userData.name, \"\\uB2D8\\uC758 \\uAE30\\uB150\\uC77C\\uB85C\\uBD80\\uD130\", /*#__PURE__*/_jsxDEV(PointLetter, {\n                  children: \" D\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 21\n                }, this), \"+\", isLoaded && calculateDDays()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(MyMenuItemBox, {\n                children: [\"\\uAE30\\uB150\\uC77C\", /*#__PURE__*/_jsxDEV(PointLetter, {\n                  children: [\"D-\", isLoaded && calculateDDays()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 21\n                }, this), \"(2031/12/10)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(MyMenuItemBox, {\n                children: [\"36,700 \\uAE30\\uB150\\uC77C \", /*#__PURE__*/_jsxDEV(PointLetter, {\n                  children: \"D-200\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 32\n                }, this), \" (2032/03/20)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(MyMenuItemBox, {\n                children: [\"36,800 \\uAE30\\uB150\\uC77C \", /*#__PURE__*/_jsxDEV(PointLetter, {\n                  children: \"D-300\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 32\n                }, this), \" (2032/06/30)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(MyMenuItemBox, {\n                children: [\"101\\uC8FC\\uB144 \", /*#__PURE__*/_jsxDEV(PointLetter, {\n                  children: \"D-365\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 27\n                }, this), \" (2032/09/05)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(MyMenuItemBox, {\n                children: [\"36,900 \\uAE30\\uB150\\uC77C \", /*#__PURE__*/_jsxDEV(PointLetter, {\n                  children: \"D-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 32\n                }, this), \" (2032/10/10)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(MyMenuItemBox, {\n                children: [\"37,000 \\uAE30\\uB150\\uC77C \", /*#__PURE__*/_jsxDEV(PointLetter, {\n                  children: \"D-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 32\n                }, this), \" (2032/01/10)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          children: /*#__PURE__*/_jsxDEV(HomeMenuBox, {\n            children: [/*#__PURE__*/_jsxDEV(HomeSubMenuTitle, {\n              children: \"\\uD50C\\uB79C\\uC744 \\uC138\\uC6CC \\uBCF4\\uC138\\uC694!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CustomCalerdar, {\n              setSelectedDate: setSelectedDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this), selectedDate !== null ? /*#__PURE__*/_jsxDEV(Link, {\n              to: `/planning/${selectedDate}`,\n              children: /*#__PURE__*/_jsxDEV(StyledButtonWidthMargin, {\n                children: [`${selectedDate.getFullYear()}/${selectedDate.getMonth() + 1}/${selectedDate.getDate()} 데이트 `, \"\\uC608\\uC57D\\uD558\\uB7EC \\uAC00\\uAE30\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Link, {\n              to: `/planning/`,\n              children: /*#__PURE__*/_jsxDEV(StyledButtonWidthMargin, {\n                children: \"\\uC608\\uC57D\\uD558\\uB7EC \\uAC00\\uAE30\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(MemberHome, \"XhzsZgaEgiCtABWZSWGd73iWXgU=\");\n\n_c6 = MemberHome;\nexport default MemberHome;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"MenuSection\");\n$RefreshReg$(_c2, \"Container\");\n$RefreshReg$(_c3, \"HomeMenuBox\");\n$RefreshReg$(_c4, \"HomeSubMenuTitle\");\n$RefreshReg$(_c5, \"StyledButtonWidthMargin\");\n$RefreshReg$(_c6, \"MemberHome\");","map":{"version":3,"sources":["D:/__Bitcamp/__crafts/02_final/project/1022 ~/PlanD/front-end/src/pages/MemberHome.jsx"],"names":["React","useEffect","useState","styled","Header","Footer","ImageSlider","Dots","PointLetter","BodyLayout","StyledButton","MenuBox","SubMenuTitle","MyMenuItemBox","CustomCalerdar","Link","read_cookie","axios","MenuSection","section","Container","div","HomeMenuBox","HomeSubMenuTitle","StyledButtonWidthMargin","props","fromTop","MemberHome","isLoaded","setIsLoaded","userData","setUserData","selectedDate","setSelectedDate","idx","setIdx","Anniversary","setAnniversary","length","userId","body","post","then","response","data","catch","error","console","log","calculateDDays","getYMD","dateString","year","parseInt","substring","month","date","betweenDays","firstDate","secondDate","betweenTime","Math","abs","getTime","floor","dDays","today","Date","anniversary","startdate","dYMD","dDay","undefined","isNaN","targetDay","name","getFullYear","getMonth","getDate"],"mappings":"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","sourcesContent":["// 달력 스타일링 마무리\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"../components/header/Header\";\r\nimport Footer from \"../components/footer/Footer\";\r\nimport ImageSlider from \"../components/body/imageSlider/ImageSlider\";\r\nimport Dots from \"../components/body/imageSlider/Dots\";\r\nimport {\r\n  PointLetter,\r\n  BodyLayout,\r\n  StyledButton,\r\n  MenuBox,\r\n  SubMenuTitle,\r\n  MyMenuItemBox,\r\n} from \"../components/body/mixin/Mixin\";\r\nimport CustomCalerdar from \"../components/body/calendar/CustomCalerdar\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { read_cookie } from \"sfcookies\";\r\nimport axios from \"axios\";\r\n\r\nconst MenuSection = styled.section`\r\n  width: 60vw;\r\n  height: 72vh;\r\n  margin: var(--margin-default);\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  width: 40%;\r\n  height: 40%;\r\n  min-width: 360px;\r\n  min-height: 520px;\r\n  margin: var(--margin-default);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: var(--color-bg);\r\n  border-radius: 8px;\r\n`;\r\n\r\nconst HomeMenuBox = styled(MenuBox)`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst HomeSubMenuTitle = styled(SubMenuTitle)`\r\n  width: 100%;\r\n  background-color: var(--color-light-green);\r\n  text-align: center;\r\n`;\r\n\r\n// const SubHeading = styled.div`\r\n//   margin-top: calc(var(--margin-default)) 0;\r\n//   font-size: var(--font-size-title-normal);\r\n// `;\r\n\r\n// const Article = styled.article`\r\n//   width: 100%;\r\n//   height: calc(100% - var(--margin-default) - var(--font-size-title-normal));\r\n//   padding: var(--padding-default);\r\n//   font-size: var(--font-size-title-small);\r\n//   display: flex;\r\n//   flex-direction: column;\r\n//   align-items: flex-start;\r\n// `;\r\n\r\n// const ArticleItem = styled.div`\r\n//   margin: calc(var(--margin-default) / 2) calc(var(--margin-default) / 4);\r\n// `;\r\n\r\nconst StyledButtonWidthMargin = styled(StyledButton)`\r\n  margin-top: ${(props) => props.fromTop};\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst MemberHome = () => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [userData, setUserData] = useState(null);\r\n  const [selectedDate, setSelectedDate] = useState(null);\r\n  const [idx, setIdx] = useState(\"first\");\r\n  const [Anniversary, setAnniversary] = useState([]);\r\n  // console.log(\"idx in member home\", idx);\r\n  // 날짜 선택하고 course로 넘어가게 하기\r\n  // console.log(\"멤버홈\", selectedDate);\r\n\r\n  useEffect(() => {\r\n    // 마이페이지에서 수정하러 왔을 때만 axios에서 유저 정보 받아오기\r\n    if (read_cookie(\"userId\").length > 0) {\r\n      // 쿠키 읽어서 유저 아이디가 있다면 서버에서 정보 받아오기\r\n      const userId = read_cookie(\"userId\");\r\n      const body = {\r\n        userId: userId,\r\n      };\r\n      axios\r\n        .post(\"/wherewego/getUserData\", body)\r\n        .then((response) => {\r\n          // console.log(response.data);\r\n          setUserData(response.data);\r\n          setIsLoaded(true);\r\n        })\r\n        .catch((error) => console.log(error));\r\n    }\r\n  }, []);\r\n  // console.log(userData);\r\n\r\n  useEffect(() => {\r\n    calculateDDays(100);\r\n  }, [isLoaded]);\r\n\r\n  // 날짜 객체를 넣으면 년, 월, 일만 반환\r\n  const getYMD = (dateString) => {\r\n    const year = parseInt(dateString.substring(0, 4));\r\n    const month = parseInt(dateString.substring(5, 7));\r\n    const date = parseInt(dateString.substring(8, 10));\r\n    return [year, month, date];\r\n  };\r\n\r\n  // 두 날짜 간의 차이를 구함 => 오늘 날짜 - 특정 날짜\r\n  const betweenDays = (firstDate, secondDate) => {\r\n    const betweenTime = Math.abs(secondDate.getTime() - firstDate.getTime());\r\n    return Math.floor(betweenTime / (1000 * 60 * 60 * 24));\r\n  };\r\n\r\n  const dDays = [];\r\n  const today = new Date();\r\n\r\n  const calculateDDays = (anniversary) => {\r\n    if (isLoaded) {\r\n      if (userData.startdate !== null) {\r\n        console.log(\"기념일 raw-data:\", userData.startdate);\r\n        // 기념일의 연월일\r\n        const dYMD = getYMD(userData.startdate);\r\n        const dDay = new Date(dYMD[0], dYMD[1] - 1, dYMD[2]);\r\n        console.log(\"기념일 YMD: \", dYMD);\r\n        // console.log(\"기념일 date객체: \", dDay);\r\n\r\n        // 오늘의 연월일\r\n\r\n        // 오늘이 며칠째인지 계산(anniversary x)\r\n        if (anniversary === undefined) {\r\n          return betweenDays(dDay, today);\r\n\r\n          // 입력한 수가 며칠 뒤인지 계산\r\n        } else if (!isNaN(anniversary)) {\r\n          //   // + 100일을 반복해서 구함\r\n\r\n          const targetDay = new Date(\r\n            dYMD[0],\r\n            dYMD[1] - 1,\r\n            dYMD[2] + anniversary\r\n          );\r\n\r\n          // console.log(dDays);\r\n          // if (betweenDays(targetDay, today) < 0) {\r\n          //   dDays.push(targetDay);\r\n          // } else {\r\n          //   return dDays.length <= 7\r\n          //     ? calculateDDays(anniversary + 100)\r\n          //     : dDays.map((day) => betweenDays(day, today));\r\n          // }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <BodyLayout padding=\"0\">\r\n        <ImageSlider idx={idx} setIdx={setIdx} />\r\n        <Dots idx={idx} setIdx={setIdx} />\r\n        <MenuSection>\r\n          <Container>\r\n            <HomeMenuBox>\r\n              {isLoaded && userData?.startdate === null ? (\r\n                <>\r\n                  <HomeSubMenuTitle>기념일을 설정해 주세요!</HomeSubMenuTitle>\r\n                  <Link to={`/individualform`}>\r\n                    <StyledButtonWidthMargin fromTop=\"400px\">\r\n                      기념일 설정하러 가기\r\n                    </StyledButtonWidthMargin>\r\n                  </Link>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <HomeSubMenuTitle>\r\n                    {userData?.name}님의 기념일로부터\r\n                    <PointLetter> D</PointLetter>+{isLoaded && calculateDDays()}\r\n                  </HomeSubMenuTitle>\r\n                  <MyMenuItemBox>\r\n                    기념일\r\n                    <PointLetter>D-{isLoaded && calculateDDays()}</PointLetter>\r\n                    (2031/12/10)\r\n                  </MyMenuItemBox>\r\n                  <MyMenuItemBox>\r\n                    36,700 기념일 <PointLetter>D-200</PointLetter> (2032/03/20)\r\n                  </MyMenuItemBox>\r\n                  <MyMenuItemBox>\r\n                    36,800 기념일 <PointLetter>D-300</PointLetter> (2032/06/30)\r\n                  </MyMenuItemBox>\r\n                  <MyMenuItemBox>\r\n                    101주년 <PointLetter>D-365</PointLetter> (2032/09/05)\r\n                  </MyMenuItemBox>\r\n                  <MyMenuItemBox>\r\n                    36,900 기념일 <PointLetter>D-400</PointLetter> (2032/10/10)\r\n                  </MyMenuItemBox>\r\n                  <MyMenuItemBox>\r\n                    37,000 기념일 <PointLetter>D-500</PointLetter> (2032/01/10)\r\n                  </MyMenuItemBox>\r\n                </>\r\n              )}\r\n            </HomeMenuBox>\r\n          </Container>\r\n          <Container>\r\n            <HomeMenuBox>\r\n              <HomeSubMenuTitle>플랜을 세워 보세요!</HomeSubMenuTitle>\r\n              {/* 예약시에는(예약일) minDate 오늘, 가입시에는(시작일) maxDate 오늘 */}\r\n\r\n              <CustomCalerdar setSelectedDate={setSelectedDate} />\r\n              {selectedDate !== null ? (\r\n                <Link to={`/planning/${selectedDate}`}>\r\n                  <StyledButtonWidthMargin>\r\n                    {`${selectedDate.getFullYear()}/${\r\n                      selectedDate.getMonth() + 1\r\n                    }/${selectedDate.getDate()} 데이트 `}\r\n                    예약하러 가기\r\n                  </StyledButtonWidthMargin>\r\n                </Link>\r\n              ) : (\r\n                <Link to={`/planning/`}>\r\n                  <StyledButtonWidthMargin>\r\n                    예약하러 가기\r\n                  </StyledButtonWidthMargin>\r\n                </Link>\r\n              )}\r\n            </HomeMenuBox>\r\n          </Container>\r\n          {/* <Container>\r\n            <SubHeading>예약</SubHeading>\r\n            <Article>\r\n              <ArticleItem>\r\n                잠실역 데이트(2031/12/10) 14:00~18:00(코스 요약 추가)\r\n              </ArticleItem>\r\n            </Article>\r\n          </Container>\r\n          <Container>\r\n            <SubHeading>이력</SubHeading>\r\n            <Article></Article>\r\n          </Container> */}\r\n        </MenuSection>\r\n      </BodyLayout>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MemberHome;\r\n"]},"metadata":{},"sourceType":"module"}